<!DOCTYPE html>
<html lang="en">

<head>
    <title>VueMart</title>
    <script src="https://unpkg.com/vue@next"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css"
        integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
</head>

<body>
    <main id="app" class="text-light bg-dark">
        <nav
            class="d-flex justify-content-between align-items-center py-3 px-5 bg-success bg-gradient text-white">
            <h1 class="m-0 display-2">VueMart</h1>
            <ul class="d-flex justify-content-between my-0">
                <li @click="display = 'home'" class="mx-3 display-6">Home</li>
                <li @click="display = 'checkout'" class="mx-3 display-6">Checkout</li>
            </ul>
        </nav>
        <article class="p-2">
            <section v-if="display == 'home'">
                <div v-if="!products.length" class="loading">
                    <div class="loadingAnimation mb-5"></div>
                    <h2 class="display-2">{{ title }}</h2>
                </div>
                <div id="home">
                    <div v-for="prod in products" class="card bg-white text-dark py-5 px-4"
                        style="width: 100%; border-radius: 40px !important;">
                        <div class="bg-white d-flex justify-content-center align-items-center p-2"
                            style="min-height: 20rem">
                            <img :src="prod.image" alt="prod.title" class="card-img-top"
                                style="object-fit:scale-down; height: 30rem; width: auto;">
                        </div>
                        <div class="card-body d-flex flex-column justify-content-between">
                            <div>
                                <h3 class="card-title display-3">{{prod.title}}</h5>
                                    <p class="card-text display-5">£{{parseFloat(prod.price).toFixed(2)}}</p>
                            </div>
                            <div class="mt-3">
                                <button @click="viewItem(prod)" class="btn btn-primary m-1 w-100">View Item</button>
                                <button class="btn btn-success m-1 w-100">Add To Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section v-if="display == 'checkout'">
                <h2>Checkout</h2>
            </section>
            <section v-if="display == 'productView'">
                <div class="d-lg-flex justify-content-around">
                    <div class="bg-white p-5 w-100 w-md-50 mb-5 mx-auto m-lg-5 img-container">
                        <img :src="this.curProd.image" alt="" class="w-50 h-auto d-block mx-auto">
                    </div>
                    <div class="w-75 w-md-50 my-2 my-md-5 mx-auto">
                        <h3 class="display-3">{{this.curProd.title}}</h3>
                        <h4 class="display-4">£{{parseFloat(this.curProd.price).toFixed(2)}}</h4>
                        <p class="mt-3 display-6">{{this.curProd.description}}</p>
                        <button class="btn btn-success m-1 w-100">Add To Cart</button>
                    </div>
                </div>
            </section>
            <!-- <section v-if="display == 'inventory'">
                <table>
                    <tbody>
                        <tr v-for="prod in products">
                            <td class="border p-4">{{prod.id}}</td>
                            <td class="border p-4">{{prod.category}}</td>
                            <td class="border p-4">{{prod.title}}</td>
                            <td class="border p-4">£{{prod.price}}</td>
                            <td class="p-4">
                                <button @click="viewItem(prod)" class="btn btn-primary m-1 w-100">View Item</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section> -->
        </article>
    </main>
    <script>
        const app = {
            data() {
                return {
                    title: 'Welcome',
                    display: 'home',
                    products: [],
                    curProd: {},
                    curCat: {}
                }
            },
            async mounted() {
                let prods = await fetch('https://fakestoreapi.com/products?limit=14')
                this.products = await prods.json();
                console.log(this.products)
            },
            methods: {
                viewItem: function (product) {
                    this.curProd = product;
                    this.display = 'productView'
                    console.log(this.curProd, this.display)
                }
            }
        }
        Vue.createApp(app).mount('#app');
    </script>
    <style>
        html {
            background: black;
            box-sizing: border-box;
        }
        h2, h3 {
            font-weight: bold !important;
        }

        li {
            list-style: none;
        }

        nav {
            position: fixed;
            top: 0;
            z-index: 1;
            width: 100%;
            height: 10vh;
            min-height: 120px;
            -webkit-box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.75);
            -moz-box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.75);
            box-shadow: 0px 5px 10px 0px rgba(0, 0, 0, 0.75);
        }
        main {
            padding-top: 10vh;
        }

        section {
            min-height: 90vh;
        }

        td {
            max-width: 280px;
        }

        button {
            font-size: 3rem !important;
            border-radius: 40px !important;
        }

        #home {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(28rem, 1fr));
            gap: 40px;
            max-width: 1440px;
            margin: 0 auto;
            padding: 3vw;
        }

        .loading {
            position: fixed;
            width: 100%;
            height: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .loadingAnimation {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #18a542;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</body>

</html>